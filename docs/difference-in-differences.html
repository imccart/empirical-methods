<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Difference-in-Differences | Navigating Empirical Methods</title>
<meta name="author" content="Ian McCarthy">
<meta name="description" content="pre {  max-height: 300px;  overflow-y: auto; } pre[class] {  max-height: 200px; }  4.1 What is Panel Data? Panel data describes the setting in which we have repeated observations over time for the...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="Chapter 4 Difference-in-Differences | Navigating Empirical Methods">
<meta property="og:type" content="book">
<meta property="og:description" content="pre {  max-height: 300px;  overflow-y: auto; } pre[class] {  max-height: 200px; }  4.1 What is Panel Data? Panel data describes the setting in which we have repeated observations over time for the...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 4 Difference-in-Differences | Navigating Empirical Methods">
<meta name="twitter:description" content="pre {  max-height: 300px;  overflow-y: auto; } pre[class] {  max-height: 200px; }  4.1 What is Panel Data? Panel data describes the setting in which we have repeated observations over time for the...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/d3-3.3.8/d3.min.js"></script><script src="libs/dagre-0.4.0/dagre-d3.min.js"></script><link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/chromatography-0.1/chromatography.js"></script><script src="libs/DiagrammeR-binding-1.0.6.1/DiagrammeR.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Navigating Empirical Methods</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Overview</a></li>
<li><a class="" href="endogeneity.html"><span class="header-section-number">2</span> Endogeneity</a></li>
<li><a class="" href="instrumental-variables.html"><span class="header-section-number">3</span> Instrumental Variables</a></li>
<li><a class="active" href="difference-in-differences.html"><span class="header-section-number">4</span> Difference-in-Differences</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="difference-in-differences" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Difference-in-Differences<a class="anchor" aria-label="anchor" href="#difference-in-differences"><i class="fas fa-link"></i></a>
</h1>
<style type="text/css">
pre {
  max-height: 300px;
  overflow-y: auto;
}

pre[class] {
  max-height: 200px;
}
</style>
<div id="what-is-panel-data" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> What is Panel Data?<a class="anchor" aria-label="anchor" href="#what-is-panel-data"><i class="fas fa-link"></i></a>
</h2>
<p>Panel data describes the setting in which we have repeated observations over time for the same units (e.g., people, firms, counties, etc.). Such data often present an opportunity to estimate causal effects more convincingly than in a purely cross-sectional setting, although that’s certainly not always the case. I’d much rather read a strong analysis of “lesser” data than a poor analysis of “better” data. But all else equal, panel data tend to contain more information and more dimensions of variation than we see in cross-sectional data, and thus more opportunities for causal inference.</p>
<p>Slightly more formally, we observe some outcome <span class="math inline">\(y\)</span> for units <span class="math inline">\(i=1,...,N\)</span> and over time periods <span class="math inline">\(t=1,...,T\)</span>. We denote the outcome for a given unit and time by <span class="math inline">\(y_{it}\)</span>. Keeping with our potential outcomes framework and notation, let’s assume that some units receive treatment at some time <span class="math inline">\(t\)</span>, which we denote by the indicator <span class="math inline">\(1(D_{it}=1)\)</span>. We also observe some other time-varying characteristics for each unit, denoted <span class="math inline">\(W_{it}\)</span>.</p>
</div>
<div id="what-is-difference-in-differences" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> What is Difference-in-Differences?<a class="anchor" aria-label="anchor" href="#what-is-difference-in-differences"><i class="fas fa-link"></i></a>
</h2>
<p>Difference-in-differences (DD) is an identification strategy that essentially attempts to predict the counterfactual for the treated group using the change in outcomes among the control group. Intuitively, we assume that the outcomes for those that ultimately received treatment <em>would have</em> evolved just as the outcomes for those that did not receive treatment (on average).</p>
</div>
<div id="twfe-and-event-studies" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> TWFE and Event Studies<a class="anchor" aria-label="anchor" href="#twfe-and-event-studies"><i class="fas fa-link"></i></a>
</h2>
<p>Two-way fixed effects (TWFE) is essentially just a shorthand for a specific and very common regression specification that includes fixed effects for units <span class="math inline">\(i=1,...,N\)</span> and time <span class="math inline">\(t=1,...,T\)</span>. I’ll denote these by <span class="math inline">\(\gamma_{i}\)</span> and <span class="math inline">\(\gamma_{t}\)</span>, respectively. TWFE is more general than a 2x2 DD specification because it allows for intercept shifts for each units and for each time period, as opposed to shifts only among each treated/control group and treated/control period. However, this extra generality doesn’t really do much in the case of a single treated group and a single treatment time, since the overall group and overall treatment period dummies in the 2x2 case are effectively an average of the individual unit and individual time period fixed effects, respectively.</p>
<p>More formally, recall our original DD regression specification,<br><span class="math inline">\(y_{it} = \alpha + \beta \times 1(Post) + \lambda \times 1(Treat) + \delta \times 1(Post) \times 1(Treat) + \varepsilon\)</span>. Here, we have a single treated group and a single treatment time, so we capture treatment time with a post-period indicator, treated group with a treatment indicator, and the interaction between the two variables is our treatment effect of interest. But we can generalize this to allow for dummies for each unit (rather than treated/control group) and similarly for each time period (rather than pre/post groups). This doesn’t change our treatment effect estimates, but it is “more efficient” (standard errors are going to be smaller). Doing so yields the following regression specification: <span class="math display">\[y_{it} = \alpha + \delta D_{it} + \gamma_{i} + \gamma_{t} + \varepsilon,\]</span><br>
where <span class="math inline">\(\gamma_{i}\)</span> and <span class="math inline">\(\gamma_{t}\)</span> denote a set of unit <span class="math inline">\(i\)</span> and time period <span class="math inline">\(t\)</span> dummy variables (or fixed effects), and where <span class="math inline">\(\delta\)</span> captures our treatment effect of interest just as before.</p>
</div>
<div id="references-1" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> References<a class="anchor" aria-label="anchor" href="#references-1"><i class="fas fa-link"></i></a>
</h2>

<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-altonji2005" class="csl-entry">
Altonji, Joseph G, Todd E Elder, and Christopher R Taber. 2005. <span>“An Evaluation of Instrumental Variable Strategies for Estimating the Effects of Catholic Schooling.”</span> <em>Journal of Human Resources</em> 40 (4): 791–821.
</div>
<div id="ref-cinelli2020" class="csl-entry">
Cinelli, Carlos, and Chad Hazlett. 2020. <span>“Making Sense of Sensitivity: Extending Omitted Variable Bias.”</span> <em>Journal of the Royal Statistical Society: Series B (Statistical Methodology)</em> 82 (1): 39–67.
</div>
<div id="ref-durbin1954" class="csl-entry">
Durbin, James. 1954. <span>“Errors in Variables.”</span> <em>Revue de l’institut International de Statistique</em>, 23–32.
</div>
<div id="ref-hausman1978" class="csl-entry">
Hausman, Jerry A. 1978. <span>“Specification Tests in Econometrics.”</span> <em>Econometrica: Journal of the Econometric Society</em>, 1251–71.
</div>
<div id="ref-oster2019" class="csl-entry">
Oster, Emily. 2019. <span>“Unobservable Selection and Coefficient Stability: Theory and Evidence.”</span> <em>Journal of Business &amp; Economic Statistics</em> 37 (2): 187–204. <a href="https://doi.org/10.1080/07350015.2016.1227711">https://doi.org/10.1080/07350015.2016.1227711</a>.
</div>
<div id="ref-wu1973" class="csl-entry">
Wu, De-Min. 1973. <span>“Alternative Tests of Independence Between Stochastic Regressors and Disturbances.”</span> <em>Econometrica: Journal of the Econometric Society</em>, 733–50.
</div>
<div id="ref-wu1974" class="csl-entry">
———. 1974. <span>“Alternative Tests of Independence Between Stochastic Regressors and Disturbances: Finite Sample Results.”</span> <em>Econometrica: Journal of the Econometric Society</em>, 529–46.
</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="instrumental-variables.html"><span class="header-section-number">3</span> Instrumental Variables</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#difference-in-differences"><span class="header-section-number">4</span> Difference-in-Differences</a></li>
<li><a class="nav-link" href="#what-is-panel-data"><span class="header-section-number">4.1</span> What is Panel Data?</a></li>
<li><a class="nav-link" href="#what-is-difference-in-differences"><span class="header-section-number">4.2</span> What is Difference-in-Differences?</a></li>
<li><a class="nav-link" href="#twfe-and-event-studies"><span class="header-section-number">4.3</span> TWFE and Event Studies</a></li>
<li><a class="nav-link" href="#references-1"><span class="header-section-number">4.4</span> References</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Navigating Empirical Methods</strong>" was written by Ian McCarthy. It was last built on 2021-08-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
